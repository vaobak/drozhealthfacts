name = "drozhealthfacts"
compatibility_date = "2024-01-01"

# Pages build configuration
pages_build_output_dir = "dist"

[build]
command = "npm run build"
cwd = "."
watch_dir = "src"

[build.environment_variables]
NODE_VERSION = "20"

# D1 Database Configuration
[[d1_databases]]
binding = "DB"
database_name = "droz-affiliate-db"
database_id = "1c2a47cf-1aa5-4f96-b6eb-a93c907678ad"

# Environment Variables
[vars]
REACT_APP_ENABLE_CLOUD_SYNC = "true"
REACT_APP_FALLBACK_TO_LOCAL = "false"
REACT_APP_DB_PROVIDER = "d1"

# Pages Functions for API
[pages]
functions = "functions"

# Redirects
[[redirects]]
from = "/api/*"
to = "/api/:splat"
status = 200

[[redirects]]
from = "/affiliate/*"
to = "/index.html"
status = 200

[[redirects]]
from = "/*"
to = "/index.html"
status = 200